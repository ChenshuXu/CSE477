/*! step10 2018-04-24 */

function Buttons(){this.on=1;this.update(1);for(var t=1;t<=3;t++)this.configButton(t)}function Simon(t){console.log("Simon started"),this.form=$(t),this.configureButton(0,"red"),this.configureButton(1,"green"),this.configureButton(2,"blue"),this.configureButton(3,"yellow"),this.state="initial",this.sequence=[Math.floor(4*Math.random())],this.current=0,this.play()}Buttons.prototype.configButton=function(t){var n=3==t?1:t+1,e=this;$("#b"+t).click(function(){e.on==t&&e.update(n)})},Buttons.prototype.update=function(t){this.on=t,$("#b1").css("background-color",1==this.on?"red":"green"),$("#b2").css("background-color",2==this.on?"red":"green"),$("#b3").css("background-color",3==this.on?"red":"green"),$("#b1").html(1==this.on?"Press Me":"&nbsp;"),$("#b2").html(2==this.on?"Press Me":"&nbsp;"),$("#b3").html(3==this.on?"Press Me":"&nbsp;")},Simon.prototype.buttonPress=function(t,n){var e=this;(console.log("Button press: "+t),"enter"==this.state)&&(this.sequence[this.current]==t?(this.current++,this.current>=this.sequence.length&&(console.log("Won that round!"),this.sequence.push(Math.floor(4*Math.random())),console.log(this.sequence),window.setTimeout(function(){e.playCurrent()},1e3),this.current=0)):(document.getElementById("buzzer").play(),this.sequence=[Math.floor(4*Math.random())],window.setTimeout(function(){e.playCurrent()},1e3),this.current=0))},Simon.prototype.play=function(){this.state="play",this.current=0,this.playCurrent()},Simon.prototype.playCurrent=function(){var t=this;if(this.current<this.sequence.length){document.getElementById(["red","green","blue","yellow"][this.sequence[this.current]]).play(),this.buttonOn(this.sequence[this.current]),console.log("current ",this.current),this.current++,window.setTimeout(function(){t.playCurrent()},1e3)}else this.buttonOn(-1),this.state="enter",this.current=0},Simon.prototype.buttonOn=function(t){for(var n=["red","green","blue","yellow"],e=0;e<4;e++){var o=$(this.form.find("input").get(e));e==t?o.css("background-color",n[e]):o.css("background-color","lightgrey")}},Simon.prototype.configureButton=function(n,e){var o=$(this.form.find("input").get(n)),r=this;o.click(function(t){document.getElementById(e).currentTime=0,document.getElementById(e).play(),r.buttonPress(n,e)}),o.mousedown(function(t){o.css("background-color",e)}),o.mouseup(function(t){o.css("background-color","lightgrey")})};